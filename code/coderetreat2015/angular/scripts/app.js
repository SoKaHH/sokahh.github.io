var GameOfLiveApp=GameOfLiveApp||{},app=angular.module("GameOfLiveApp",["ui.bootstrap","ngTouch"]);app.controller("GameController",["$scope","$timeout",function(a,b){"use strict";function c(a,b){for(var c=[],d=0;a>d;d++){for(var e=[],f=0;b>f;f++)e.push(!1);c.push(e)}return c}function d(a){for(var b=[],c=0;c<a.length;c++){for(var d=[],f=0;f<a[c].length;f++)d.push(e(a,c,f)||g(a,c,f));b.push(d)}return b}function e(a,b,c){return i(a,b,c)&&h(a,b,c)>=2&&h(a,b,c)<=3}function f(a,b,c){return i(a,b,c)&&(h(a,b,c)<2||h(a,b,c)>3)}function g(a,b,c){return!i(a,b,c)&&3==h(a,b,c)}function h(a,b,c){var d=0;return d+=i(a,b-1,c-1)?1:0,d+=i(a,b-1,c+0)?1:0,d+=i(a,b-1,c+1)?1:0,d+=i(a,b+0,c-1)?1:0,d+=i(a,b+0,c+1)?1:0,d+=i(a,b+1,c-1)?1:0,d+=i(a,b+1,c+0)?1:0,d+=i(a,b+1,c+1)?1:0}function i(a,b,c){var d=c,e=b;return 0>b&&(e=a.length-1),b>a.length-1&&(e=0),0>c&&(d=a[e].length-1),c>a[e].length-1&&(d=0),a[e][d]}function j(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++)if(a[c][d]!==b[c][d])return!1;return!0}a.newGame=function(){a.history=[],a.board=c(a.height,a.width)},a.stepOver=function(){a.history.push(a.board),a.board=d(a.board)},a.loop=function(){return a.loopActive=!0,a.stop||a.history.length>1&&j(a.history[a.history.length-2],a.history[a.history.length-1])?void a.stopLoop():void b(function(){a.stepOver(),a.loop()},50)},a.startLoop=function(){a.stop=!1,a.loop()},a.stopLoop=function(){a.stop=!0,a.loopActive=!1},a.step=function(b){a.board=a.history[b],a.history=a.history.slice(0,b)},a.toggle=function(b,c){a.history=[],a.board[b][c]=!a.board[b][c]},a.cellClass=function(b,c){return f(a.board,b,c)?"die":g(a.board,b,c)?"new":""},a.loadDisco=function(){a.height=20,a.width=20,a.board=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],a.startLoop()},a.loadSpaceships=function(){a.height=22,a.width=20,a.board=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],a.startLoop()},a.stop=!1,a.loopActive=!1,a.height=20,a.width=20,a.newGame()}]);